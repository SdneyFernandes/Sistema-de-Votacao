{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fsidn\\\\Downloads\\\\voting_service_frontEnd\\\\src\\\\pages\\\\Login\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { userApi, getCurrentUser } from '../../services/api';\nimport { AuthContainer, AuthForm, AuthInput, AuthButton, SwitchAuth } from '../../styles/AuthStyles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const handleLogin = async e => {\n    e.preventDefault();\n    try {\n      const response = await userApi.post('/login', {\n        email,\n        password\n      });\n      console.log('Resposta do login:', response.data); // Verificar o que o backend está retornando\n\n      const token = response.data.token; // Verifica se o backend realmente retorna um token\n      if (!token) {\n        throw new Error('Token não recebido');\n      }\n      localStorage.setItem('token', token);\n\n      // Obtém os dados do usuário autenticado\n      const userResponse = await getCurrentUser(token);\n      console.log('Usuário logado:', userResponse.data); // Verificar se a API retorna o papel do usuário\n\n      const userRole = userResponse.data.role;\n      localStorage.setItem('role', userRole);\n\n      // Redireciona com base no papel\n      navigate(userRole === 'ADMIN' ? '/create-vote' : '/dashboard');\n    } catch (error) {\n      console.error('Erro ao fazer login:', error);\n      alert('Erro ao fazer login');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContainer, {\n    children: /*#__PURE__*/_jsxDEV(AuthForm, {\n      onSubmit: handleLogin,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AuthInput, {\n        type: \"email\",\n        placeholder: \"E-mail\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AuthInput, {\n        type: \"password\",\n        placeholder: \"Senha\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AuthButton, {\n        type: \"submit\",\n        children: \"Entrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SwitchAuth, {\n        children: [\"N\\xE3o tem uma conta?\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: () => navigate('/register'),\n          children: \"Registre-se\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"3EppOPrTUbqGnofT+5nt0Tjfe+w=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useNavigate","userApi","getCurrentUser","AuthContainer","AuthForm","AuthInput","AuthButton","SwitchAuth","jsxDEV","_jsxDEV","Login","_s","navigate","email","setEmail","password","setPassword","handleLogin","e","preventDefault","response","post","console","log","data","token","Error","localStorage","setItem","userResponse","userRole","role","error","alert","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","target","required","onClick","_c","$RefreshReg$"],"sources":["C:/Users/fsidn/Downloads/voting_service_frontEnd/src/pages/Login/index.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { userApi, getCurrentUser } from '../../services/api'\nimport {\n  AuthContainer,\n  AuthForm,\n  AuthInput,\n  AuthButton,\n  SwitchAuth\n} from '../../styles/AuthStyles'\n\nconst Login = () => {\n  const navigate = useNavigate()\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault()\n    try {\n      const response = await userApi.post('/login', { email, password })\n\n      console.log('Resposta do login:', response.data) // Verificar o que o backend está retornando\n\n      const token = response.data.token // Verifica se o backend realmente retorna um token\n      if (!token) {\n        throw new Error('Token não recebido')\n      }\n\n      localStorage.setItem('token', token)\n\n      // Obtém os dados do usuário autenticado\n      const userResponse = await getCurrentUser(token)\n      console.log('Usuário logado:', userResponse.data) // Verificar se a API retorna o papel do usuário\n\n      const userRole = userResponse.data.role\n      localStorage.setItem('role', userRole)\n\n      // Redireciona com base no papel\n      navigate(userRole === 'ADMIN' ? '/create-vote' : '/dashboard')\n    } catch (error) {\n      console.error('Erro ao fazer login:', error)\n      alert('Erro ao fazer login')\n    }\n  }\n\n  return (\n    <AuthContainer>\n      <AuthForm onSubmit={handleLogin}>\n        <h2>Login</h2>\n        <AuthInput\n          type=\"email\"\n          placeholder=\"E-mail\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n        <AuthInput\n          type=\"password\"\n          placeholder=\"Senha\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <AuthButton type=\"submit\">Entrar</AuthButton>\n        <SwitchAuth>\n          Não tem uma conta?{' '}\n          <a onClick={() => navigate('/register')}>Registre-se</a>\n        </SwitchAuth>\n      </AuthForm>\n    </AuthContainer>\n  )\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}