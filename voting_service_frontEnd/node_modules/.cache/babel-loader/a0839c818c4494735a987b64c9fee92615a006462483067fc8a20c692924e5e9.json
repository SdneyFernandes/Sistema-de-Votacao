{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fsidn\\\\Documents\\\\workspace-spring-tool-suite-4-4.23.1.RELEASE\\\\Sistema-de-Votacao\\\\voting_service_frontEnd\\\\src\\\\pages\\\\Dashboard\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { voteApi } from '../../services/api';\nimport { getUserRole } from '../../utils/auth';\nimport { DashboardContainer, Title, VoteList, VoteItem, Button, AdminButton } from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const navigate = useNavigate();\n  const [votes, setVotes] = useState([]);\n  useEffect(() => {\n    const fetchVotes = async () => {\n      try {\n        const {\n          data\n        } = await voteApi.get('/api/votes_session');\n        setVotes(data);\n      } catch (error) {\n        alert('Erro ao carregar votações!');\n      }\n    };\n    fetchVotes();\n  }, []);\n  const isVoteOpen = (startAt, endAt) => {\n    const now = new Date();\n    return now >= new Date(startAt) && now <= new Date(endAt);\n  };\n  return /*#__PURE__*/_jsxDEV(DashboardContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: \"Vota\\xE7\\xF5es Dispon\\xEDveis\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VoteList, {\n      children: votes.map(vote => /*#__PURE__*/_jsxDEV(VoteItem, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: vote.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), isVoteOpen(vote.startAt, vote.endAt) ? /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => navigate(`/vote/${vote.id}`),\n          children: \"Votar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => navigate(`/results/${vote.id}`),\n          children: \"Ver Resultados\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this)]\n      }, vote.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), getUserRole() === 'ADMIN' && /*#__PURE__*/_jsxDEV(AdminButton, {\n      onClick: () => navigate('/create-vote'),\n      children: \"Criar Nova Vota\\xE7\\xE3o\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"nbJHFEQcaMzJ68UPan+VSIxQ9Bs=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["useEffect","useState","useNavigate","voteApi","getUserRole","DashboardContainer","Title","VoteList","VoteItem","Button","AdminButton","jsxDEV","_jsxDEV","Dashboard","_s","navigate","votes","setVotes","fetchVotes","data","get","error","alert","isVoteOpen","startAt","endAt","now","Date","children","fileName","_jsxFileName","lineNumber","columnNumber","map","vote","title","onClick","id","_c","$RefreshReg$"],"sources":["C:/Users/fsidn/Documents/workspace-spring-tool-suite-4-4.23.1.RELEASE/Sistema-de-Votacao/voting_service_frontEnd/src/pages/Dashboard/index.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { voteApi } from '../../services/api'\nimport { getUserRole } from '../../utils/auth'\nimport {\n  DashboardContainer,\n  Title,\n  VoteList,\n  VoteItem,\n  Button,\n  AdminButton\n} from './styles'\n\ninterface VoteSession {\n  id: number\n  title: string\n  startAt: string\n  endAt: string\n}\n\nconst Dashboard = () => {\n  const navigate = useNavigate()\n  const [votes, setVotes] = useState<VoteSession[]>([])\n\n  useEffect(() => {\n    const fetchVotes = async () => {\n      try {\n        const { data } = await voteApi.get('/api/votes_session')\n        setVotes(data)\n      } catch (error) {\n        alert('Erro ao carregar votações!')\n      }\n    }\n    fetchVotes()\n  }, [])\n\n  const isVoteOpen = (startAt: string, endAt: string) => {\n    const now = new Date()\n    return now >= new Date(startAt) && now <= new Date(endAt)\n  }\n\n  return (\n    <DashboardContainer>\n      <Title>Votações Disponíveis</Title>\n      <VoteList>\n        {votes.map((vote) => (\n          <VoteItem key={vote.id}>\n            <span>{vote.title}</span>\n            {isVoteOpen(vote.startAt, vote.endAt) ? (\n              <Button onClick={() => navigate(`/vote/${vote.id}`)}>\n                Votar\n              </Button>\n            ) : (\n              <Button onClick={() => navigate(`/results/${vote.id}`)}>\n                Ver Resultados\n              </Button>\n            )}\n          </VoteItem>\n        ))}\n      </VoteList>\n\n      {getUserRole() === 'ADMIN' && (\n        <AdminButton onClick={() => navigate('/create-vote')}>\n          Criar Nova Votação\n        </AdminButton>\n      )}\n    </DashboardContainer>\n  )\n}\n\nexport default Dashboard\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}